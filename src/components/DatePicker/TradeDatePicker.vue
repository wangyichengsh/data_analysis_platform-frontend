<template>
  <div>
    <el-date-picker
      v-model="date"
      :picker-options="pickerOptions"
      type="date"
      placeholder="请选择日期"
      value-format="yyyy-MM-dd"
      format=""
      :value="value"
    />
  </div>
</template>

<script>
// import { exclude_date }
import { formatDate } from 'element-ui/src/utils/date-util'
const shHoliday = ['19981001', '19981002', '19990101', '19990210', '19990211', '19990212', '19990215', '19990216', '19990217', '19990218', '19990219', '19990222', '19990223', '19990224', '19990225', '19990226', '19990503', '19991001', '19991004', '19991005', '19991006', '19991007', '19991220', '19991231', '20000103', '20000131', '20000201', '20000202', '20000203', '20000204', '20000207', '20000208', '20000209', '20000210', '20000211', '20000501', '20000502', '20000503', '20000504', '20000505', '20001002', '20001003', '20001004', '20001005', '20001006', '20010101', '20010122', '20010123', '20010124', '20010125', '20010126', '20010129', '20010130', '20010131', '20010201', '20010202', '20010501', '20010502', '20010503', '20010504', '20010507', '20011001', '20011002', '20011003', '20011004', '20011005', '20020101', '20020102', '20020103', '20020211', '20020212', '20020213', '20020214', '20020215', '20020218', '20020219', '20020220', '20020221', '20020222', '20020501', '20020502', '20020503', '20020506', '20020507', '20020930', '20021001', '20021002', '20021003', '20021004', '20021007', '20030101', '20030130', '20030131', '20030203', '20030204', '20030205', '20030206', '20030207', '20030501', '20030502', '20030505', '20030506', '20030507', '20030508', '20030509', '20031001', '20031002', '20031003', '20031006', '20031007', '20040101', '20040119', '20040120', '20040121', '20040122', '20040123', '20040126', '20040127', '20040128', '20040503', '20040504', '20040505', '20040506', '20040507', '20041001', '20041004', '20041005', '20041006', '20041007', '20050103', '20050207', '20050208', '20050209', '20050210', '20050211', '20050214', '20050215', '20050502', '20050503', '20050504', '20050505', '20050506', '20051003', '20051004', '20051005', '20051006', '20051007', '20060102', '20060103', '20060126', '20060127', '20060130', '20060131', '20060201', '20060202', '20060203', '20060501', '20060502', '20060503', '20060504', '20060505', '20061002', '20061003', '20061004', '20061005', '20061006', '20070101', '20070102', '20070103', '20070219', '20070220', '20070221', '20070222', '20070223', '20070501', '20070502', '20070503', '20070504', '20070507', '20071001', '20071002', '20071003', '20071004', '20071005', '20071231', '20080101', '20080206', '20080207', '20080208', '20080211', '20080212', '20080404', '20080501', '20080502', '20080609', '20080915', '20080929', '20080930', '20081001', '20081002', '20081003', '20090101', '20090102', '20090126', '20090127', '20090128', '20090129', '20090130', '20090406', '20090501', '20090528', '20090529', '20091001', '20091002', '20091005', '20091006', '20091007', '20091008', '20100101', '20100215', '20100216', '20100217', '20100218', '20100219', '20100405', '20100503', '20100614', '20100615', '20100616', '20100922', '20100923', '20100924', '20101001', '20101004', '20101005', '20101006', '20101007', '20110103', '20110202', '20110203', '20110204', '20110207', '20110208', '20110404', '20110405', '20110502', '20110606', '20110912', '20111003', '20111004', '20111005', '20111006', '20111007', '20120102', '20120103', '20120123', '20120124', '20120125', '20120126', '20120127', '20120402', '20120403', '20120404', '20120430', '20120501', '20120622', '20121001', '20121002', '20121003', '20121004', '20121005', '20130101', '20130102', '20130103', '20130211', '20130212', '20130213', '20130214', '20130215', '20130404', '20130405', '20130429', '20130430', '20130501', '20130610', '20130611', '20130612', '20130919', '20130920', '20131001', '20131002', '20131003', '20131004', '20131007', '20140101', '20140131', '20140203', '20140204', '20140205', '20140206', '20140407', '20140501', '20140502', '20140602', '20140908', '20141001', '20141002', '20141003', '20141006', '20141007', '20150101', '20150102', '20150218', '20150219', '20150220', '20150223', '20150224', '20150406', '20150501', '20150622', '20150903', '20150904', '20151001', '20151002', '20151005', '20151006', '20151007', '20160101', '20160208', '20160209', '20160210', '20160211', '20160212', '20160404', '20160502', '20160609', '20160610', '20160915', '20160916', '20161003', '20161004', '20161005', '20161006', '20161007', '20170102', '20170127', '20170130', '20170131', '20170201', '20170202', '20170403', '20170404', '20170501', '20170529', '20170530', '20171002', '20171003', '20171004', '20171005', '20171006', '20180101', '20180215', '20180216', '20180219', '20180220', '20180221', '20180405', '20180406', '20180430', '20180501', '20180618', '20180924', '20181001', '20181002', '20181003', '20181004', '20181005', '20181231', '20190101', '20190204', '20190205', '20190206', '20190207', '20190208', '20190405', '20190501', '20190502', '20190503', '20190607', '20190913', '20191001', '20191002', '20191003', '20191004', '20191007', '20200101', '20200124', '20200127', '20200128', '20200129', '20200130', '20200131', '20200406', '20200501', '20200504', '20200505', '20200625', '20200626', '20201001', '20201002', '20201005', '20201006', '20201007', '20201008']
const hkHoliday = ['20120123', '20120124', '20120125', '20120404', '20120406', '20120409', '20120501', '20120702', '20121001', '20121002', '20121023', '20121225', '20121226', '20130101', '20130102', '20130103', '20130104', '20130107', '20130108', '20130109', '20130110', '20130111', '20130114', '20130115', '20130116', '20130117', '20130118', '20130121', '20130122', '20130123', '20130124', '20130125', '20130128', '20130129', '20130130', '20130131', '20130201', '20130204', '20130205', '20130206', '20130207', '20130208', '20130211', '20130212', '20130213', '20130214', '20130215', '20130329', '20130401', '20130404', '20130501', '20130517', '20130612', '20130701', '20130920', '20131001', '20131014', '20131225', '20131226', '20140101', '20140131', '20140203', '20140418', '20140421', '20140501', '20140506', '20140602', '20140701', '20140909', '20141001', '20141002', '20141225', '20141226', '20150101', '20150219', '20150220', '20150403', '20150406', '20150407', '20150501', '20150525', '20150701', '20150903', '20150928', '20151001', '20151021', '20151225', '20160101', '20160208', '20160209', '20160210', '20160325', '20160328', '20160404', '20160502', '20160609', '20160701', '20160916', '20161010', '20161226', '20161227', '20170102', '20170130', '20170131', '20170404', '20170414', '20170417', '20170501', '20170503', '20170530', '20171002', '20171005', '20171225', '20171226', '20180101', '20180216', '20180219', '20180330', '20180402', '20180405', '20180501', '20180522', '20180618', '20180702', '20180925', '20181001', '20181017', '20181225', '20181226', '20190101', '20190205', '20190206', '20190207', '20190405', '20190419', '20190422', '20190501', '20190513', '20190607', '20190701', '20191001', '20191007', '20191225', '20191226', '20200101', '20200127', '20200128', '20200410', '20200413', '20200430', '20200501', '20200625', '20200701', '20201001', '20201002', '20201026', '20201225']

function isHoliday(date, canlendar) {
  if (date.getDay() === 0 || date.getDay() === 6) {
    return true
  } else if (canlendar === 'sh') {
    if (date <= new Date(1990, 1, 1) || date >= new Date(2020, 12, 31) || shHoliday.includes(formatDate(date, 'yyyyMMdd'))) {
      return true
    }
  } else if (canlendar === 'hk') {
    if (date <= new Date(2012, 1, 1) || date >= new Date(2020, 12, 31) || hkHoliday.includes(formatDate(date, 'yyyyMMdd'))) {
      return true
    }
  }
  return false
}

export default {
  name: 'ElTradedatePicker',
  data() {
    return {
      size: '',
      canlendar: 'sh',
      date: '',
      default_value: new Date('2020-01-01'),
      pickerOptions: {
        cellClassName(date) {
          if (isHoliday(date, 'sh')) {
            return 'red'
          }
        }
      }
    }
  },
  props:['value'],
  create() {
    this.canlendar = 'sh'
  },
  watch: {
    date(val) {
      this.$emit('input', val)
    },
    value(val){
      this.date=this.value
    }
  },
  methods: {
    queryShHoliday(){
      getShHoliday().then((resp) =>{
      })
    }
  }
}
</script>

<style>
  .red{
    color:red;
  }
</style>

